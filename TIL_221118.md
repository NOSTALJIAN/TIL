# â¤ï¸â€ğŸ”¥ **TIL DAY 09** â¤ï¸â€ğŸ”¥

> ğŸ“† 2022ë…„ 11ì›” 18ì¼ ê¸ˆìš”ì¼

<br>

---

<br>

ì–´ì œ ìƒˆë²½ 4ì‹œ ë„˜ì–´ì„œê¹Œì§€ ëª»ì¤ë‹¤... <br>
Java main class not Found Error ë•Œë¬¸ì—.. <br>
í”¼ê³¤í•´ì„œ ì£½ì„ê±°ê°™ì• ... <br>
ì›ë˜ ì ì‹¬ì¯¤ì´ë©´ ëª»ì¤ì–´ë„ ì¢€ ìŒ©ìŒ©í•´ì§€ëŠ”ë°... <br>
DB ë¶€ë¶„ ëª»ë”°ë¼ê°€ì„œ ìˆ˜ì—… ë‚´ìš©ë„ ëª»ì•Œì•„ë“£ê² ìŒ.. <br>
ì£¼ë§ë™ì•ˆ Javaë‘ DB ë¶€ë¶„ ë¹¡ê³µí•´ì•¼í•¨ ã…œã…œ ğŸ˜­ğŸ˜­ <br>

<br>

---

<br>

## ğŸ’¡ JDBC

> DB ì—°ê²° ì‘ì—…ì„ í•  ìˆ˜ ìˆë„ë¡ Javaì—ì„œ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ <br>
> JDBC: Java Database Connectivity

<br>

### â“ DriverManager

- **JDBC Driver**ë¥¼ ê´€ë¦¬
- DBì™€ ì—°ê²°í•´ì„œ **`Connection` êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±**

<br>

### â“ Connection

- `Statement`, `PreparedStatement`, `CallableStatement` êµ¬í˜„ê°ì²´ ìƒì„±
- íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë° DB ì—°ê²°ì„ ëŠì„ ë•Œ ì‚¬ìš©

<br>

### â“ Statement

- **SQL**ì˜ DDLê³¼ DMLì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©
  - DDL: Data Definition Language
  - DML: Data Manipulation Language
- ì£¼ë¡œ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ì •ì  SQLë¬¸ì„ ì‹¤í–‰í•  ë–„ ì‚¬ìš©

<Br>

### â“ PreparedStatement

- Statementì™€ ë™ì¼í•˜ê²Œ SQLì˜ DDLê³¼ DML ë¬¸ì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©
- **ë§¤ê°œë³€ìˆ˜í™”ëœ SQLë¬¸ ì‚¬ìš© ê°€ëŠ¥**
- í¸ë¦¬ì„±ê³¼ ë³´ì•ˆì„±ì´ ì¢‹ìŒ
- Statement ë³´ë‹¤ ì£¼ë¡œ ì‚¬ìš©ë¨

<br>

### â“ CallableStatement

- DBì— ì €ì¥ë˜ì–´ ìˆëŠ” í”„ë¡œì‹œì €(procuder)ì™€ í•¨ìˆ˜(function)ì„ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©

<br>

### â“ ResultSet

- DBì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ì½ì„ ë•Œ ì‚¬ìš©

<br>

---

<br>

## ğŸ’¡ DB ì—°ê²°

<br>

### ğŸ“ JDBC Driver ë¡œë”©

> í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨ì„ DBì™€ ì—°ê²°í•˜ê¸° ìœ„í•´ ê°€ì¥ ë¨¼ì € í•´ì•¼ í•  ì‘ì—…

    Class.forName("com.mysql.cj.jdbc.Driver");

- Class.forName() ë©”ì†Œë“œëŠ” ë¬¸ìì—´ë¡œ ì£¼ì–´ì§„ JDBC Driver í´ë˜ìŠ¤ë¥¼ Build Pathì—ì„œ ì°¾ê³ , ë©”ëª¨ë¦¬ë¡œ ë¡œë”©í•¨
- ì´ ê³¼ì •ì—ì„œ JDBC Driver í´ë˜ìŠ¤ì˜ static ë¸”ë¡ì´ ì‹¤í–‰ë¨
- DriverManagerì—ã…” JDBC Driver ê°ì²´ê°€ ë“±ë¡ë¨
- Build Pathì—ì„œ JDBC Driver í´ë˜ìŠ¤ë¥¼ ëª»ì°¾ìœ¼ë©´ ClassNotFoundException ë°œìƒ
- ì˜ˆì™¸ì²˜ë¦¬ í•´ì•¼í•¨

<br>

    Connection conn = DriverManager.getConnection("ì—°ê²° ë¬¸ìì—´", "ì‚¬ìš©ì", "ë¹„ë°€ë²ˆí˜¸");

- DriverManagerì— JDBC Driverê°€ ë“±ë¡ë˜ë©´ getConnection() ë©”ì†Œë“œë¡œ DBì™€ ì—°ê²° ê°€ëŠ¥

<br>

    jdbc:mysql://localhost:3306/'DB(Database)ì´ë¦„'

- MySQLì˜ ì—°ê²° ë¬¸ìì—´
- localhost : ë¡œì»¬ì— ì„¤ì¹˜ëœ MySQLì— ì—°ê²°í•˜ê² ë‹¤ëŠ” ì˜ë¯¸
- 3306 : Port ë²ˆí˜¸
- ë§ˆì§€ë§‰ì—” DB ì´ë¦„ì„ ê¸°ì…

<br>

ì—°ê²°ì´ ì„±ê³µí•˜ë©´ getConnection() ë©”ì†Œë“œëŠ” Connection ê°ì²´ë¥¼ ë¦¬í„´
ì—°ê²°ì´ ì‹¤íŒ¨í•˜ë©´ SQLExceptionì´ ë°œìƒí•˜ë¯€ë¡œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•´ì•¼í•¨

<br>

[ğŸ”— DB Connection Example](https://github.com/NOSTALJIAN/JAVA/blob/d615d5f973797565fcf52063d6d8751f1c26b15a/Jian/jdbc/day01/ConnectionExample.java)

<br>

---

<br>

## ğŸ’¡ ë°ì´í„° ì €ì¥

> **JDBC**ë¥¼ ì´ìš©í•´ì„œ **`INSERTë¬¸`** ì‹¤í–‰ <br>
> **SQL**ë¬¸ì´ **`INSERT`**, **`UPDATE`**, **`DELETE`** ì¼ ê²½ìš°, **`executeUpdate()`** ë©”ì†Œë“œ í˜¸ì¶œ

<br>

### ğŸ“ users í…Œì´ë¸”ì— ìƒˆë¡œìš´ ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” `INSERT`ë¬¸

    INSERT INTO users (userID, userName, userPassword, userAge, userEmail)
    VALUES ('winter', 'í•œê²¨ìš¸', '12345', '25', 'winter@mycompany.com')

<br>

- 1ï¸âƒ£ ê°’ì„ **`?`**(ë¬¼ìŒí‘œ)ë¡œ ëŒ€ì²´í•´ì„œ ë§¤ê°œë³€ìˆ˜í™”

      INSERT INTO users (userID, userName, userPassword, userAge, userEmail)
      VALUES (?, ?, ?, ?, ?)

<br>

- 2ï¸âƒ£ INSERTë¬¸ì„ String íƒ€ì… ë³€ìˆ˜ **`sql`** ì— ë¬¸ìì—´ë¡œ ëŒ€ì…

      String sql = new StringBuilder()
        .append("INSERT INTO users (userID, userName, userPassword, userEmail) ")
        .append("VALUES (?, ?, ?, ?, ?)")
        .toString();

      OR

      String sql = "" +
        "INSERT INTO users (userID, userName, userPassword, userEmail) " +
        "VALUES (?, ?, ?, ?, ?)";

<br>

- 3ï¸âƒ£ ë§¤ê°œë³€ìˆ˜í™”ëœ SQL ë¬¸ì„ ì‹¤í–‰í•˜ë ¤ë©´ **`PreparedStatement`** ê°€ í•„ìš”í•¨

      PreparedStatement pstmt = conn.prepareStatement(sql);
  - **Connection**ì˜ **prepareStatement()** ë©”ì†Œë“œë¡œë¶€í„° **PreparedStatement**ë¥¼ ì–»ê¸°

<br>

- 4ï¸âƒ£ **`?`** ì— ë“¤ì–´ê°ˆ ê°’ ì§€ì •

      pstmt.setString(1, "winter");
      pstmt.setString(2, "í•œê²¨ìš¸");
      pstmt.setString(3, "12345");
      pstmt.setString(4, 25);
      pstmt.setString(5, "winter@mycompany.com");
  - **`?`** ëŠ” **ìˆœì„œ**ì— ë”°ë¼ **1**ë²ˆë¶€í„° ë²ˆí˜¸ê°€ ë¶€ì—¬ë¨
  - **ê°’**ì˜ **íƒ€ì…**ì— ë”°ë¼ Setter ë©”ì†Œë“œ ì„ íƒ
  - ì²« ë²ˆì§¸ì—ëŠ” `?`ì˜ ìˆœë²ˆ, ë‘ ë²ˆì§¸ì—ëŠ” ê°’ì„ ì§€ì •

<br>

- 5ï¸âƒ£ ê°’ì„ ì§€ì •í•œ í›„ **`executeUpdate()`** ë©”ì†Œë“œ í˜¸ì¶œ

      int rows = pstmt.executeUpdate();
  - SQLë¬¸ì´ ì‹¤í–‰ë˜ë©´ì„œ **users** í…Œì´ë¸”ì— 1ê°œì˜ í–‰ì´ ì €ì¥ë¨
  - **executeUpdate()** ë©”ì†Œë“œê°€ **ë¦¬í„´**í•˜ëŠ” ê°’ì€ **ì €ì¥ëœ í–‰ ìˆ˜**
    - ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆì„ ê²½ìš° 1ì„ ë¦¬í„´

<br>

- 6ï¸âƒ£ **`close()`** ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë©”ëª¨ë¦¬ í•´ì œ

      pstmt.close();
  - **PreparedStatement**ë¥¼ ë” ì´ìƒ **ì‚¬ìš©í•˜ì§€ ì•Šì„** ê²½ìš°

<br>

[ğŸ”— UserInsertExample](https://github.com/NOSTALJIAN/JAVA/blob/b36db64ce973bb6ecab78d9426b3bcec6b3109ad/Jian/jdbc/day01/UserInsertExample.java)

<br>

![userí…Œì´ë¸”_ì ìš©ì‚¬ì§„_MySQL](/IMAGE/thisisjava_users.png)

<br>

---

<br>

### ğŸ“ boards í…Œì´ë¸”ì— ê²Œì‹œë¬¼ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” `INSERT`ë¬¸

    INSERT INTO boards (btitle, bcontent, bwriter, bdate, bfilename, bfiledata)
    VALUES ('ëˆˆ ì˜¤ëŠ” ë‚ ', 'í•¨ë°•ëˆˆì´ ë‚´ë ¤ìš”', 'winter', now(), 'snow.jpg', binaryData)

- `bno`ëŠ” ìë™ ì¦ê°€ ì»¬ëŸ¼ì´ë¯€ë¡œ ìƒëµ
- `now()`ëŠ” í˜„ì¬ ì‹œê°„

<br>

- 1ï¸âƒ£ **`now()`ë¥¼ ì œì™¸**í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” **`?`ë¡œ ëŒ€ì²´**ì‹œì¼œ **ë§¤ê°œë³€ìˆ˜í™”** ì‹œí‚¤ê³  String íƒ€ì… ë³€ìˆ˜ **`sql`** ì— ì €ì¥

      String sql = "" +
        "INSERT INTO boards (btitle, bcontent, bwriter, bdate, bfilename, bfiledata) " +
        "VALUES (?, ?, ?, now(), ?, ?)";

<br>

- 2ï¸âƒ£ **`PreparedStatement`** ì–»ê¸°

      PreparedStatement pstmt = conn.prepareStatement(sql,
                                Statement.RETURN_GENERATED_KEYS);
  - ë‘ë²ˆì§¸ ë§¤ê°œê°’ì€ **INSERT ë¬¸ì´ ì‹¤í–‰ëœ í›„** ê°€ì ¸ì˜¬ í‚¤ ê°’
    - ìë™ ì¦ê°€ëœ `bno`ê°’ì„ ê°€ì ¸ì˜´
    - `SQL`ë¬¸ì´ ì‹¤í–‰ë˜ê¸° **ì „**ì—ëŠ” `bno` ê°’ì„ **ëª¨ë¦„**
    - `SQL`ë¬¸ì´ ì‹¤í–‰ëœ **í›„**ì— `bno` ì»¬ëŸ¼ì— **ì‹¤ì œë¡œ ì €ì¥ëœ** ê°’ì„ ì–»ëŠ” ê²ƒ

<br>

- 3ï¸âƒ£ **`?`** ê°’ ì§€ì •

      pstmt.setString(1, "ëˆˆ ì˜¤ëŠ” ë‚ ");
      pstmt.setString(2, "í•¨ë°•ëˆˆì´ ë‚´ë ¤ìš”.");
      pstmt.setString(3, "winter");
      pstmt.setString(4, "snow.jpeg");
      pstmt.setBlob(5, new FileInputStream("ëˆˆ ì‚¬ì§„ ê²½ë¡œ"));
  - `bfiledata` ì»¬ëŸ¼ì€ ë°”ì´ë„ˆë¦¬ íƒ€ì…(`blob`)ì„
    - `setBinaryStream()`, `setBlob()`, `setBytes()` ë©”ì†Œë“œ ì¤‘ í•˜ë‚˜ë¥¼ ì´ìš©

<br>

- 4ï¸âƒ£ `INSERT` ë¬¸ì„ ì‹¤í–‰í•˜ê³  ì €ì¥ëœ **`bno`** ê°’ì„ ì–»ëŠ” ë°©ë²•

      int rows = pstmt.executeUpdate();              // SQLë¬¸ ì‹¤í–‰
       if(rows == 1) {
       ResultSet rs = pstmt.getGeneratedKeys();      // new String[] { "bno" }ì— ê¸°ìˆ ëœ ì»¬ëŸ¼ ê°’ì„ ê°€ì ¸ì˜´

       if(rs.next()) {                               // ê°’ì´ ìˆë‹¤ë©´
         int bno = rs.getInt(1);                     // new String[] { "bno" }ì˜ ì²« ë²ˆì§¸ í•­ëª© bnoì˜ ì»¬ëŸ¼ ê°’ì„ ì½ìŒ
       }
      rs.close();                                    // ResultSetì´ ì‚¬ìš©í–ˆë˜ ë©”ëª¨ë¦¬ í•´ì œ
      }

<br>

[ğŸ”— BoardInsertExample](https://github.com/NOSTALJIAN/JAVA/blob/b36db64ce973bb6ecab78d9426b3bcec6b3109ad/Jian/jdbc/day01/BoardInsertExample.java)

<br>

![boardsí…Œì´ë¸”_ì ìš©ì‚¬ì§„_1_MySQL](/IMAGE/thisisjava_boards_1.png)
![boardsí…Œì´ë¸”_ì ìš©ì‚¬ì§„_2_MySQL](/IMAGE/thisisjava_boards_2.png)

<br>

---

<br>

## ğŸ’¡ ë°ì´í„° ìˆ˜ì •

<br>

### ğŸ“ boards í…Œì´ë¸”ì— ì €ì¥ëœ ë°ì´í„° ìˆ˜ì •

    # bnoê°€ 2ì¸ ê²Œì‹œë¬¼ì˜ btitle, bcontent, bfiledataë¥¼ ë³€ê²½
    UPDATE boards SET
      btitle='ëˆˆì‚¬ëŒ',
      bcontent='ëˆˆìœ¼ë¡œ ë§Œë“  ì‚¬ëŒ',
      bfilename='snowman.jpeg',
      bfiledata=binaryData
    WHERE bno=2

<br>

- 1ï¸âƒ£ ê°’ì„ **`?`** ë¡œ ëŒ€ì²´í•´ì„œ **ë§¤ê°œë³€ìˆ˜í™”**

      UPDATE boards SET
        btitle=?,
        bcontent=?,
        bfilename=?,
        bfiledata=?
      WHERE bno=?

<br>

- 2ï¸âƒ£ **`sql`** ì— ë§¤ê°œë³€ìˆ˜í™”ëœ **`UPDATE`ë¬¸ ì €ì¥**

      String sql = new StringBuilder()
        .append("UPDATE boards SET ")
        .append("btitle=?, ")
        .append("bcontent=?, ")
        .append("bfilename=?, ")
        .append("bfiledata=? ")
        .append("WHERE bno=?")
        .toString();

<br>

- 3ï¸âƒ£ **`PreparedStatement`** ì–»ê¸°

      PreparedStatement pstmt = conn.prepareStatement(sql);
      pstmt.setString(1, "ëˆˆì‚¬ëŒ");
      pstmt.setString(2, "ëˆˆìœ¼ë¡œ ë§Œë“  ì‚¬ëŒ");
      pstmt.setString(3, "snowman.jpeg");
      pstmt.setBlob(4, new FileInputStream("íŒŒì¼ ì €ì¥ ê²½ë¡œ"));
      pstmt.setInt(5, 2);

<br>

- 4ï¸âƒ£ **`UPDATE`** ë¬¸ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ **`executeUpdate()`** ë©”ì†Œë“œ í˜¸ì¶œ

      int rows = pstmt.executeUpdate();

<br>

[ğŸ”— BoardUpdateExample](https://github.com/NOSTALJIAN/JAVA/blob/1c0f0b24214a24e41ffa5ee1b31172ed3d092182/Jian/jdbc/day01/BoardUpdateExample.java)

<br>

![boardsí…Œì´ë¸”_ìˆ˜ì •_ì ìš©ì‚¬ì§„_1](IMAGE/thisisjava_boards_update_1.png)
![boardsí…Œì´ë¸”_ìˆ˜ì •_ì ìš©ì‚¬ì§„_2](IMAGE/thisisjava_boards_update_2.png)

<br>

---

<br>

## ğŸ’¡ ë°ì´í„° ì‚­ì œ

<br>

### ğŸ“ boards í…Œì´ë¸”ì— bwriterê°€ snowì¸ ëª¨ë“  ê²Œì‹œë¬¼ ì‚­ì œ

    DELETE FROM boards WHERE bwriter='snow'

<br>

- 1ï¸âƒ£ **ë§¤ê°œë³€ìˆ˜í™”**ëœ **`DELETE`** ë¬¸ìœ¼ë¡œ ë³€ê²½

      DELETE FROM boards WHERE bwriter=?

<br>

- 2ï¸âƒ£ **`DELETE`** ë¬¸ì„ **`sql`** ì— ëŒ€ì…

      String sql = "DELETE FROM boards WHERE bwriter=?";

<br>

- 3ï¸âƒ£ **`PreparedStatement`** ë¥¼ ì–»ê³  ê°’ì— **`?`** ì§€ì • í›„ **`SQL`** ë¬¸ ì‹¤í–‰

      String sql = "DELETE FROM boards WHERE bwriter=?";
      PreparedStatement pstmt = conn.prepareStatement(sql);
      pstmt.setString(1, "snow");
      int rows = pstmt.executeUpdate();
  - ë¦¬í„´ê°’ : ì‚­ì œëœ í–‰ ìˆ˜

<br>

[ğŸ”— BoardDeleteExample.java](https://github.com/NOSTALJIAN/JAVA/blob/7bfdcbf32ef3540be1eab7146192a703c3582efc/Jian/jdbc/day01/Ex05_BoardDelete.java)

<br>

![boardsí…Œì´ë¸”_ì‚­ì œ_ì ìš©ì‚¬ì§„](IMAGE/thisisjava_boards_delete.png)

<br>

---

<br>

## ğŸ’¡ ë°ì´í„° ì½ê¸°

> ë°ì´í„°ë¥¼ **ê°€ì ¸ì˜¤ëŠ”** **`SELECT`** ë¬¸ì¼ ê²½ìš°, **`executeQuery()`** ë©”ì†Œë“œ í˜¸ì¶œ

    ResultSet rs = pstmt.executeQuery();

<br>

### ğŸ“ ResultSet

> **SELECT**ë¬¸ì— ê¸°ìˆ ëœ ì»¬ëŸ¼ìœ¼ë¡œ êµ¬ì„±ëœ **í–‰ì˜ ì§‘í•©**

    SELECT userid, username, userage FROM users

- ì»¤ì„œê°€ ìˆëŠ” í–‰ì˜ ë°ì´í„°ë§Œ ì½ì„ ìˆ˜ ìˆìŒ
  - ì»¤ì„œ : í–‰ì„ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°

<br>

- ê°€ì ¸ì˜¨ ë°ì´í„° í–‰ì˜ ì•ë’¤ë¡œ `beforeFirst`ì™€ `afterLast` í–‰ì´ ë¶™ìŒ
  - ìµœì´ˆ ì»¤ì„œëŠ” `beforeFirst`ë¥¼ ê°€ë¦¬í‚´
- ì²«ë²ˆì§¸ ë°ì´í„° í–‰ì¸ first í–‰ì„ ì½ìœ¼ë ¤ë©´ ì»¤ì„œë¥¼ ì´ë™ì‹œì¼œì•¼ í•¨
- `next()` ë©”ì†Œë“œ ì‚¬ìš©

      boolean result = rs.next();
  - `next()` ë©”ì†Œë“œëŠ” ì»¤ì„œë¥¼ ë‹¤ìŒ í–‰ìœ¼ë¡œ ì´ë™ì‹œí‚´
- ì´ë™í•œ í–‰ì— ë°ì´í„°ê°€ ìˆìœ¼ë©´ **true**ë¥¼ ë¦¬í„´
- ì´ë™í•œ í–‰ì— ë°ì´í„°ê°€ ì—†ìœ¼ë©´ **false**ë¥¼ ë¦¬í„´

<br>

- â“ **SELECT** ë¬¸ìœ¼ë¡œ ê°€ì ¸ì˜¨ ë°ì´í„° í–‰ì´ ì—†ëŠ” ê²½ìš°
  - `beforeFirst` í–‰ê³¼ `afterLast` í–‰ì´ ë¶™ì–´ìˆê¸° ë•Œë¬¸ì— <br>
    ì²« ë²ˆì§¸ `next()` ê²°ê³¼ëŠ” **false**

<br>

- â“ **1ê°œ**ì˜ ë°ì´í„° í–‰ë§Œ ê°€ì ¸ì˜¬ ê²½ìš°

      ResultSet rs = pstmt.executeQuery();
      if(rs,next()) {
        //ì²« ë²ˆì§¸ ë°ì´í„° í–‰ ì²˜ë¦¬
      } else {
        //afterLast í–‰ìœ¼ë¡œ ì´ë™í–ˆì„ ê²½ìš°
      }
  - if ì¡°ê±´ì‹ì—ì„œ `next()` ë©”ì†Œë“œë¥¼ 1ë²ˆ í˜¸ì¶œ
  - ì£¼ë¡œ **SELECT** ë¬¸ì´ ê¸°ë³¸í‚¤(Primary Key)ë¥¼ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²½ìš°

<br>

- â“ **nê°œ**ì˜ ë°ì´í„° í–‰ì„ ê°€ì ¸ì˜¬ ê²½ìš°

      ResultSet rs = pstmt.executeQuery();
      while(rs.next()) {
        //last í–‰ê¹Œì§€ ì´ë™í•˜ë©´ì„œ ë°ì´í„° í–‰ ì²˜ë¦¬
      }
        //afterLast í–‰ìœ¼ë¡œ ì»ë™í–ˆì„ ê²½ìš°
  - **while** ë¬¸ì„ ì´ìš©í•´ì„œ `next()` ë©”ì†Œë“œë¥¼ ë°˜ë³µ í˜¸ì¶œ
  - **true**ê°€ ë¦¬í„´ë  ë™ì•ˆ(`last` í–‰ê¹Œì§€ ì´ë™í•  ë•Œê¹Œì§€) ë°ì´í„° í–‰ì„ ì²˜ë¦¬
  - **false**ê°€ ë¦¬í„´ë˜ë©´(`afterLast` í–‰ìœ¼ë¡œ ì´ë™í•  ë–„) ë°˜ë³µì„ ì¢…ë£Œ
  - **ResultSet**ì˜ ì‚¬ìš©ì´ ëë‚˜ë©´ ë©”ëª¨ë¦¬ë¥¼ í•´ì œ ì‹œí‚¤ëŠ” ê²ƒì´ ì¢‹ë‹¤

        rs.close();
    - `close()` ë©”ì†Œë“œ í˜¸ì¶œ
    - ë§ì€ ë°ì´í„° í–‰ì´ ì €ì¥ë  ìˆ˜ ìˆê¸° ë•Œë¬¸

<br>

---

<br>

### ğŸ“ ë°ì´í„° í–‰ ì½ê¸°

> **Getter** ë©”ì†Œë“œ ì‚¬ìš© <br>

- **`ResultSet`** ì—ì„œ ì»¬ëŸ¼ ìˆœë²ˆì€ **1**ë¶€í„° ì‹œì‘
  - userid = 1, username = 2, userage = 3

<br>

- âœ”ï¸ ì»¬ëŸ¼ **ì´ë¦„**ìœ¼ë¡œ ì½ê¸°

      String userid =
        rs.getString("userid");
      String userName =
        rs.getString("username");
      int userAge = rs.getInt("userage");

<br>

- âœ”ï¸ ì»¬ëŸ¼ **ìˆœë²ˆ**ìœ¼ë¡œ ì½ê¸°

      String userid = rs.getString(1);
      String userName = rs.getString(2);
      String userAge = rs.getInt(3);

<br>

- **SELECT** ë¬¸ì— ì—°ì‚°ì‹ì´ë‚˜ í•¨ìˆ˜ í˜¸ì¶œì´ í¬í•¨ë˜ì–´ìˆë‹¤ë©´ **ìˆœë²ˆ**ìœ¼ë¡œ ì½ì–´ì•¼ í•¨

      SELECT userid, userage -1
      FROM users

      String userId =
        rs.getString("userid");
      int userAge = rs.getInt(2);

<br>

---

<br>

### ğŸ“ ì‚¬ìš©ì ì •ë³´ ì½ê¸°

<br>

#### ğŸ” users í…Œì´ë¸”ì—ì„œ useridê°€ winterì¸ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê°€ì ¸ì™€ ì¶œë ¥

<br>

- 1ï¸âƒ£ **User í´ë˜ìŠ¤** ì‘ì„±
  - [ğŸ”— User.java](https://github.com/NOSTALJIAN/JAVA/blob/d9b88f081c23318ecd9acd7a45f7b97de052cbbc/Jian/jdbc/day01/User.java)

<br>

- 2ï¸âƒ£ **userid**ê°€ **winter**ì¸ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” **SELECT** ë¬¸

      SELECT userid, username, userpassword, userage, useremail
      FROM users
      WHERE userid='winter';

<br>

- 3ï¸âƒ£ ì¡°ê±´ì ˆì˜ ê°’ì„ **`?`** ë¡œ ëŒ€ì²´í•œ **ë§¤ê°œë³€ìˆ˜í™”**ëœ SQLë¬¸ì„ **`sql`** ì— ëŒ€ì…

      String sql = "" +
        "SELECT userid, username, userpassword, userage, useremail " +
        "FROM users " +
        "WHERE userid=?";

<br>

- 4ï¸âƒ£ **PreparedStatement**ë¥¼ ì–»ê³  **`?`** ì— ê°’ì„ ì§€ì •

      PreparedStatement pstmt = conn.prepareStatement(sql);
      pstmt.setString(1, "winter");

<br>

- 5ï¸âƒ£ **`executeQuery()`** ë©”ì†Œë“œë¡œ **SELECT** ë¬¸ì„ ì‹¤í–‰í•´ **ResultSet** ì–»ê¸°

      ResultSet rs = pstmt.executeQuery();
      if(rs.next()) {
        User user = new User();
        user.setUserId(rs.getString("userid"));
        user.setUserName(rs.getString("username"));
        user.setUserPassword(rs.getString("userpassword"));
        user.setUserAge(rs.getInt(4));            //  ì»¬ëŸ¼ ìˆœë²ˆì„ ì´ìš©í•´ì„œ ì»¬ëŸ¼ ì§€ì •
        user.setUserEmail(rs.getString(5));       //  ì»¬ëŸ¼ ìˆœë²ˆì„ ì´ìš©í•´ì„œ ì»¬ëŸ¼ ì§€ì •
        System.out.println(user);
      } else {                                    //  ë°ì´í„° í–‰ì„ ê°€ì ¸ì˜¤ì§€ ì•Šì•˜ì„ ê²½ìš°
        System.out.println("ì‚¬ìš©ì ì•„ì´ë””ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ");
      }
  - **userid** : ê¸°ë³¸í‚¤(Primary key)
    - ì¡°ê±´ì— ë§ëŠ” í–‰ì€ 1ê°œì´ê±°ë‚˜ 0ê°œ
  - **if** ë¬¸ì„ ì´ìš©
    - `next()` ë©”ì†Œë“œê°€ **true**ë¥¼ ë¦¬í„´í•  ê²½ìš° ë°ì´í„° í–‰ì„ User ê°ì²´ì— ì €ì¥í•˜ê³  ì¶œë ¥
  - `System.out.println(user)`ëŠ” ë¡¬ë³µì´ ìƒì„±í•œ **User**ì˜ `toString()` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë°›ì€ ë¦¬í„´ê°’ì„ ì¶œë ¥

<br>

[ğŸ”— UserSelectExample](https://github.com/NOSTALJIAN/JAVA/blob/c84f7344c1b69fca741df5a36afba31c041d12c7/Jian/jdbc/day01/Ex06_UserSelect.java)

<br>

---

<br>

### ğŸ“ ê²Œì‹œë¬¼ ì •ë³´ ì½ê¸°

<br>

#### ğŸ” boards í…Œì´ë¸”ì—ì„œ bwriterê°€ winterì¸ ê²Œì‹œë¬¼ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸°

<br>

- **BoardInsertExample** ì˜ˆì œë¥¼ ì´ìš©í•´ <br>
  **boards** í…Œì´ë¸”ì— **bwriter**ë¥¼ **winter**ë¡œ í•˜ëŠ” ê²Œì‹œë¬¼ì„ **2ê°œ ì´ìƒ** ì €ì¥

![EX02_BoardInsert](IMAGE/BoardInsert.png)

<br>

- 1ï¸âƒ£ **Board** í´ë˜ìŠ¤ ì‘ì„±
  - **boards** í…Œì´ë¸”ì˜ 1ê°œ í–‰(**ê²Œì‹œë¬¼**)ì„ ì €ì¥í•  ìš©ë„
  - ì»¬ëŸ¼ **ê°œìˆ˜**ì™€ **íƒ€ì…**ì— ë§ê²Œ í•„ë“œ ì„ ì–¸
  - **ë¡¬ë³µ `@Data`** ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©(Getter, Setter, toString)
  - [ğŸ”— Board](https://github.com/NOSTALJIAN/JAVA/blob/404fb41a475f597fd83fbdd542729dc969231536/Jian/jdbc/day01/Board.java)

<br>

- 2ï¸âƒ£ **bwriter**ê°€ **winter**ì¸ ê²Œì‹œë¬¼ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” **SELECT** ë¬¸

      SELECT bno, btitle, bcontent, bwriter, bdate, bfilename, bfiledata
      FROM boards
      WHERE bwriter='winter';

<br>

- 3ï¸âƒ£ ì¡°ê±´ì ˆì˜ ê°’ì„ **`?`** ë¡œ ëŒ€ì²´í•œ **ë§¤ê°œë³€ìˆ˜í™”**ëœ **SELECT** ë¬¸ì„ **`sql`** ì— ëŒ€ì…

      String sql = "" +
        "SELECT bno, btitle, bcontent, bwriter, bdate, bfilename, bfiledata " +
        "FROM boards " +
        "WHERE bwriter=?";

<br>

- 4ï¸âƒ£ **PreparedStatement**ë¥¼ ì–»ê³  **`?`** ì— ê°’ì„ ì§€ì •

      PreparedStatement pstmt = conn.prepareStatement(sql);
      pstmt.setString(1, "winter");

<br>

- 5ï¸âƒ£ **`executeQuery()`** ë©”ì†Œë“œë¡œ **SELECT** ë¬¸ì„ ì‹¤í–‰ í›„ **ResultSet** ì„ ì–»ê¸°

      ResultSet rs = pstmt.executeQuery();
      while(rs.next()) {
        //ë°ì´í„° í–‰ì„ ì½ê³  Board ê°ì²´ì— ì €ì¥
        Board board = new Board();
        board.setBno(rs.getInt("bno"));
        board.setBtitle(rs.getString("btitle"));
        board.setBcontent(rs.getString("bcontent"));
        board.setBwriter(rs.getString("bwriter"));
        board.setBdate(rs.getDate("bdate"));
        board.setBfilename(rs.getString("bfilename"));
        board.setBfiledata(rs.getBlob("bfiledate"));

        //ì½˜ì†”ì— ì¶œë ¥
        System.out.println(board);
      }
  - ì¡°ê±´ì— ë§ëŠ” í–‰ì€ **nê°œ**
  - **while** ë¬¸ì„ ì´ìš©í•´ì„œ **`next()`** ë©”ì†Œë“œê°€ **false**ë¥¼ ë¦¬í„´í•  ë•Œ ê¹Œì§€ ë°˜ë³µ
  - ë‚˜ì˜¨ ê°’ì„ **Board** ê°ì²´ì— ì €ì¥í•˜ê³  ì¶œë ¥
  - `System.out.println(board)`ëŠ” **ë¡¬ë³µ**ì´ ìƒì„±í•œ **Board**ì˜ `toString()` ì˜ ë¦¬í„´ê°’ì„ ì¶œë ¥

<br>

- 6ï¸âƒ£ **Blob** ê°ì²´ì— ì €ì¥ëœ ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ì–»ê¸°

      # ìŠ¤íŠ¸ë¦¼ ì–»ê¸°
      Blob blob = board.getBfiledata();
      InputStream is =
        blob.getBinaryStream();
      
      # ë°°ì—´ ì–»ê¸°
      Blob blob = Board.getBfiledata();
      byte[] bytes = blob.getBytess(0, blob.length());

<br>

- 7ï¸âƒ£ **Blob** ê°ì²´ì—ì„œ **InputStream**ì„ ì–»ê³  íŒŒì¼ë¡œ ì €ì¥í•˜ê¸°

      InputStream is = blob.getBinaryStream();
      OutputStream os = new FileOutputStream("/Users/NOSTALJIAN/Downloads/" + board.getBfilename());
      is.transferTo(os);
      os.flush();
      os.close();
      is.close();

<br>

[ğŸ”— BoardSelectExample](https://github.com/NOSTALJIAN/JAVA/blob/3f971360a97c790ecfba394f8124dda62aca0307/Jian/jdbc/day01/Ex07_BoardSelect.java)

<br>

![bwrtier_winter_select_ì ìš©ì‚¬ì§„_1](IMAGE/boardSelect_1.png)
![bwriter_winter_select_ì ìš©ì‚¬ì§„_2](IMAGE/boardSelect_2.png)

<!--END-->